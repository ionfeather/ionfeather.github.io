<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="ä¸ºä»€ä¹ˆè¦å­¦ä¹ LangChain\ræˆ‘å¸Œæœ›èƒ½å¤Ÿæ„å»ºä¸€ä¸ªèƒ½é˜…è¯»PDFè®ºæ–‡çš„Agentï¼Œå¹¶ä¸”èƒ½å¤Ÿè¾“å‡ºå¯¹è®ºæ–‡ä¼˜ç¼ºç‚¹çš„è¯„ä»·ã€‚\nå¯¼å¸ˆ&nbsp;&nbsp;&nbsp;2024-10-12 14:30\råšä¸€ä¸ªè®ºæ–‡é˜…è¯»çš„å¤§æ¨¡å‹ã€‚ 2024-10-12 14:45&nbsp;&nbsp;&nbsp;æˆ‘\rå¥½çš„è€å¸ˆã€‚ ä½¿ç”¨LangChainå¬è¯´æ¯”è¾ƒæ–¹ä¾¿ã€‚\n">
<title>LangChainå­¦ä¹ ç¬”è®°</title>

<link rel='canonical' href='https://ionfeather.github.io/2024/langchain-learning/'>

<link rel="stylesheet" href="/scss/style.min.1d7a8740b6622c3aa06f50c002c7f46ebe727d91d772e2ba50bc5d17ab924ca2.css"><meta property='og:title' content="LangChainå­¦ä¹ ç¬”è®°">
<meta property='og:description' content="ä¸ºä»€ä¹ˆè¦å­¦ä¹ LangChain\ræˆ‘å¸Œæœ›èƒ½å¤Ÿæ„å»ºä¸€ä¸ªèƒ½é˜…è¯»PDFè®ºæ–‡çš„Agentï¼Œå¹¶ä¸”èƒ½å¤Ÿè¾“å‡ºå¯¹è®ºæ–‡ä¼˜ç¼ºç‚¹çš„è¯„ä»·ã€‚\nå¯¼å¸ˆ&nbsp;&nbsp;&nbsp;2024-10-12 14:30\råšä¸€ä¸ªè®ºæ–‡é˜…è¯»çš„å¤§æ¨¡å‹ã€‚ 2024-10-12 14:45&nbsp;&nbsp;&nbsp;æˆ‘\rå¥½çš„è€å¸ˆã€‚ ä½¿ç”¨LangChainå¬è¯´æ¯”è¾ƒæ–¹ä¾¿ã€‚\n">
<meta property='og:url' content='https://ionfeather.github.io/2024/langchain-learning/'>
<meta property='og:site_name' content='ionfeather&#39;Log'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='LangChain' /><meta property='article:tag' content='LLM' /><meta property='article:published_time' content='2024-11-26T13:45:58&#43;08:00'/><meta property='article:modified_time' content='2024-11-26T13:45:58&#43;08:00'/><meta property='og:image' content='https://ionfeather.github.io/2024/langchain-learning/cover.png' />
<meta name="twitter:title" content="LangChainå­¦ä¹ ç¬”è®°">
<meta name="twitter:description" content="ä¸ºä»€ä¹ˆè¦å­¦ä¹ LangChain\ræˆ‘å¸Œæœ›èƒ½å¤Ÿæ„å»ºä¸€ä¸ªèƒ½é˜…è¯»PDFè®ºæ–‡çš„Agentï¼Œå¹¶ä¸”èƒ½å¤Ÿè¾“å‡ºå¯¹è®ºæ–‡ä¼˜ç¼ºç‚¹çš„è¯„ä»·ã€‚\nå¯¼å¸ˆ&nbsp;&nbsp;&nbsp;2024-10-12 14:30\råšä¸€ä¸ªè®ºæ–‡é˜…è¯»çš„å¤§æ¨¡å‹ã€‚ 2024-10-12 14:45&nbsp;&nbsp;&nbsp;æˆ‘\rå¥½çš„è€å¸ˆã€‚ ä½¿ç”¨LangChainå¬è¯´æ¯”è¾ƒæ–¹ä¾¿ã€‚\n"><meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content='https://ionfeather.github.io/2024/langchain-learning/cover.png' />
    <link rel="shortcut icon" href="/ion.ico" />

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&display=swap"
    onload="this.media='all'" onError="this.media='none'">
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@callmebill/lxgw-wenkai-web@latest/style.css"
    onload="this.media='all'" onError="this.media='none'">

  <style>
     
    :root {
      --sys-font-family: 'LXGW WenKai', 'Noto Serif SC', serif;
      --zh-font-family: 'LXGW WenKai', 'Noto Serif SC', serif;
      --base-font-family: 'LXGW WenKai', 'Noto Serif SC', serif;
      --code-font-family: 'Consolas', monospace; 
      --article-font-family: 'Noto Serif SC', serif; 
      --heading-font-family: 'LXGW WenKai', serif; 
    }

     
    body {
      font-family: var(--base-font-family);
      font-weight: normal;
    }
  </style>
</head>

    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="åˆ‡æ¢èœå•">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avatar_hu5957396180509793543.jpg" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">ğŸŒ³</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">ionfeather&#39;Log</a></h1>
            <h2 class="site-description">åå¹´é¥®å†°ï¼Œéš¾å‡‰çƒ­è¡€</h2>
        </div>
    </header><ol class="menu-social">
            
                <li>
                    <a 
                        href='https://github.com/ionfeather'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg t="1732597946058" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3746" width="24" height="24"><path d="M850.346667 155.008a42.666667 42.666667 0 0 0-22.741334-23.509333c-8.704-3.754667-85.717333-33.322667-200.32 39.168H396.714667c-114.773333-72.618667-191.701333-42.922667-200.32-39.168a42.88 42.88 0 0 0-22.741334 23.466666c-26.197333 66.218667-18.048 136.448-7.850666 176.896C134.272 374.016 128 413.098667 128 469.333333c0 177.877333 127.104 227.882667 226.730667 246.272a189.568 189.568 0 0 0-13.013334 46.549334A44.373333 44.373333 0 0 0 341.333333 768v38.613333c-19.498667-4.138667-41.002667-11.946667-55.168-26.112C238.08 732.416 188.330667 682.666667 128 682.666667v85.333333c25.002667 0 65.365333 40.362667 97.834667 72.832 51.029333 51.029333 129.066667 55.253333 153.386666 55.253333 3.114667 0 5.376-0.085333 6.528-0.128A42.666667 42.666667 0 0 0 426.666667 853.333333v-82.090666c4.266667-24.746667 20.224-49.621333 27.946666-56.362667a42.666667 42.666667 0 0 0-23.125333-74.581333C293.333333 624.554667 213.333333 591.488 213.333333 469.333333c0-53.12 5.632-70.741333 31.573334-99.285333 11.008-12.117333 14.08-29.568 7.978666-44.8-4.821333-11.904-18.773333-65.450667-6.485333-117.546667 20.650667-1.578667 59.904 4.565333 113.706667 40.96C367.104 253.44 375.466667 256 384 256h256a42.666667 42.666667 0 0 0 23.936-7.338667c54.016-36.522667 92.970667-41.770667 113.664-41.130666 12.330667 52.224-1.578667 105.770667-6.4 117.674666a42.666667 42.666667 0 0 0 8.021333 44.928C805.077333 398.464 810.666667 416.085333 810.666667 469.333333c0 122.581333-79.957333 155.52-218.069334 170.922667a42.666667 42.666667 0 0 0-23.125333 74.709333c19.797333 17.066667 27.861333 32.469333 27.861333 53.034667v128h85.333334v-128c0-20.437333-3.925333-38.101333-9.770667-53.12C769.92 695.765333 896 643.712 896 469.333333c0-56.362667-6.272-95.530667-37.76-137.514666 10.197333-40.405333 18.261333-110.506667-7.893333-176.810667z" fill="currentColor" p-id="3747"></path></svg>
                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='mailto:lizishadowmay@gmail.com'
                        target="_blank"
                        title="Email"
                        rel="me"
                    >
                        
                        
                            <svg t="1732597869588" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="23464" width="24" height="24"><path d="M926.47619 355.644952V780.190476a73.142857 73.142857 0 0 1-73.142857 73.142857H170.666667a73.142857 73.142857 0 0 1-73.142857-73.142857V355.644952l73.142857 62.000762V780.190476h682.666666V417.645714l73.142857-62.000762zM853.333333 170.666667a74.044952 74.044952 0 0 1 26.087619 4.778666 72.704 72.704 0 0 1 30.622477 22.186667 73.508571 73.508571 0 0 1 10.678857 17.67619c3.169524 7.509333 5.12 15.652571 5.607619 24.210286L926.47619 243.809524v24.380952L559.469714 581.241905a73.142857 73.142857 0 0 1-91.306666 2.901333l-3.632762-2.925714L97.52381 268.190476v-24.380952a72.899048 72.899048 0 0 1 40.155428-65.292191A72.97219 72.97219 0 0 1 170.666667 170.666667h682.666666z m-10.971428 73.142857H181.638095L512 525.58019 842.361905 243.809524z" p-id="23465" fill="currentColor"></path></svg>
                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>ä¸»é¡µ</span>
            </a>
        </li>
        
        
        <li >
            <a href='/%E5%85%B3%E4%BA%8E/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>å…³äº</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>å½’æ¡£</span>
            </a>
        </li>
        
        
        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>æœç´¢</span>
            </a>
        </li>
        
        
        <li >
            <a href='/%E5%8F%8B%E9%93%BE/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>å‹é“¾</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span>æ·±è‰²æ¨¡å¼</span>
                    </li>
                
            </ol>
        </li>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">ç›®å½•</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#ä¸ºä»€ä¹ˆè¦å­¦ä¹ langchain">ä¸ºä»€ä¹ˆè¦å­¦ä¹ LangChain</a></li>
    <li><a href="#langchainæ˜¯ç”¨æ¥åšä»€ä¹ˆçš„">LangChainæ˜¯ç”¨æ¥åšä»€ä¹ˆçš„ï¼Ÿ</a></li>
    <li><a href="#æ„é€ ä¸€ä¸ªè¯­ä¹‰æœç´¢å¼•æ“">æ„é€ ä¸€ä¸ªè¯­ä¹‰æœç´¢å¼•æ“</a>
      <ol>
        <li><a href="#è¯»å–pdf">è¯»å–PDF</a></li>
        <li><a href="#splitting">Splitting</a></li>
        <li><a href="#embeddings">Embeddings</a></li>
        <li><a href="#vector-stores">Vector Stores</a></li>
        <li><a href="#usage">Usage</a></li>
        <li><a href="#retrievers">Retrievers</a></li>
      </ol>
    </li>
    <li><a href="#chat-modelså’Œpromptæ¨¡æ¿">Chat Modelså’ŒPromptæ¨¡æ¿</a></li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="has-image main-article">
    <header class="article-header">
        <div class="article-image">
            <a href="/2024/langchain-learning/">
                <img src="/2024/langchain-learning/cover_hu15659216343497446802.png"
                        srcset="/2024/langchain-learning/cover_hu15659216343497446802.png 800w, /2024/langchain-learning/cover_hu17865342867058448887.png 1600w"
                        width="800" 
                        height="383" 
                        loading="lazy"
                        alt="Featured image of post LangChainå­¦ä¹ ç¬”è®°" />
                
            </a>
        </div>
    

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" style="background-color: #5DB9AE; color: #fff;">
                å­¦ä¹ æœ­è®°
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/2024/langchain-learning/">LangChainå­¦ä¹ ç¬”è®°</a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">2024-11-26</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    é˜…è¯»æ—¶é•¿: 5 åˆ†é’Ÿ
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <h2 id="ä¸ºä»€ä¹ˆè¦å­¦ä¹ langchain">ä¸ºä»€ä¹ˆè¦å­¦ä¹ LangChain
</h2><p>æˆ‘å¸Œæœ›èƒ½å¤Ÿæ„å»ºä¸€ä¸ªèƒ½é˜…è¯»PDFè®ºæ–‡çš„Agentï¼Œå¹¶ä¸”èƒ½å¤Ÿè¾“å‡ºå¯¹è®ºæ–‡ä¼˜ç¼ºç‚¹çš„è¯„ä»·ã€‚</p>

<div class="chat --other">
    <div class="chat__inner">
        <div class="chat__meta">å¯¼å¸ˆ&nbsp;&nbsp;&nbsp;2024-10-12 14:30</div>
        <div class="chat__text">
              
åšä¸€ä¸ªè®ºæ–‡é˜…è¯»çš„å¤§æ¨¡å‹ã€‚  

        </div>
    </div>
</div>


<style>
    .chat {
        margin: 10px;
        padding: 10px;
        position: relative;
         
        transition: transform 0.2s;
         
        max-width: 80%;
        min-width: 15%;
    }
    
    .chat:hover {
        transform: scale(1.05);
    }
    
    .chat.--self {
        text-align: left;
        background-color: #ecf5ff;
        color: #000000;
        border-radius: 15px;
        width: fit-content;
        margin-left: auto;
    }
     
    
    .chat.--self::before {
        content: "";
        position: absolute;
        right: -18px;
         
        bottom: 5px;
        transform: translateY(-50%);
        border-width: 15px 0 0 20px;
        border-style: solid;
        border-color: transparent transparent transparent #ecf5ff;
         
    }
     
    
    .chat.--other {
        text-align: left;
        background-color: #ffecec;
        color: #333;
        border-radius: 15px;
        position: relative;
        width: fit-content;
    }
     
    
    .chat.--other::before {
        content: "";
        position: absolute;
        left: -18px;
        bottom: 5px;
        transform: translateY(-50%);
        border-width: 15px 20px 0 0;
        border-style: solid;
        border-color: transparent #ffecec transparent transparent;
    }
     
    
    .chat__meta {
        font-weight: bold;
        font-size: 0.67em;
        color: #707070;
        margin-bottom: 5px;
    }
     
    
    .chat__text {
        font-size: 0.9em;
        margin-left: 10px;
        word-break: break-all;
    }
    
    [data-scheme="dark"] {
        .chat.--self {
            color: #fefefe;
            background-color: #253958;
        }
        .chat.--self::before {
            border-color: transparent transparent transparent #253958;
        }
        .chat.--other {
            color: #fefefe;
            background-color: #1a1a1a;
        }
        .chat.--other::before {
            border-color: transparent #1a1a1a transparent transparent;
        }
        .chat__meta {
            color: #b1b1b1;
        }
    }
</style>


<div class="chat --self">
    <div class="chat__inner">
        <div class="chat__meta" style="text-align: right;">2024-10-12 14:45&nbsp;&nbsp;&nbsp;æˆ‘</div>
        <div class="chat__text">
              
å¥½çš„è€å¸ˆã€‚  

        </div>
    </div>
</div>


<style>
    .chat {
        margin: 10px;
        padding: 10px;
        position: relative;
         
        transition: transform 0.2s;
         
        max-width: 80%;
        min-width: 15%;
    }
    
    .chat:hover {
        transform: scale(1.05);
    }
    
    .chat.--self {
        text-align: left;
        background-color: #ecf5ff;
        color: #000000;
        border-radius: 15px;
        width: fit-content;
        margin-left: auto;
    }
     
    
    .chat.--self::before {
        content: "";
        position: absolute;
        right: -18px;
         
        bottom: 5px;
        transform: translateY(-50%);
        border-width: 15px 0 0 20px;
        border-style: solid;
        border-color: transparent transparent transparent #ecf5ff;
         
    }
     
    
    .chat.--other {
        text-align: left;
        background-color: #ffecec;
        color: #333;
        border-radius: 15px;
        position: relative;
        width: fit-content;
    }
     
    
    .chat.--other::before {
        content: "";
        position: absolute;
        left: -18px;
        bottom: 5px;
        transform: translateY(-50%);
        border-width: 15px 20px 0 0;
        border-style: solid;
        border-color: transparent #ffecec transparent transparent;
    }
     
    
    .chat__meta {
        font-weight: bold;
        font-size: 0.67em;
        color: #707070;
        margin-bottom: 5px;
    }
     
    
    .chat__text {
        font-size: 0.9em;
        margin-left: 10px;
        word-break: break-all;
    }
    
    [data-scheme="dark"] {
        .chat.--self {
            color: #fefefe;
            background-color: #253958;
        }
        .chat.--self::before {
            border-color: transparent transparent transparent #253958;
        }
        .chat.--other {
            color: #fefefe;
            background-color: #1a1a1a;
        }
        .chat.--other::before {
            border-color: transparent #1a1a1a transparent transparent;
        }
        .chat__meta {
            color: #b1b1b1;
        }
    }
</style>

<p>ä½¿ç”¨LangChainå¬è¯´æ¯”è¾ƒæ–¹ä¾¿ã€‚</p>
<h2 id="langchainæ˜¯ç”¨æ¥åšä»€ä¹ˆçš„">LangChainæ˜¯ç”¨æ¥åšä»€ä¹ˆçš„ï¼Ÿ
</h2><p>LangChainæ˜¯ä¸€ä¸ªç”¨äºå¼€å‘ç”±LLMé©±åŠ¨çš„åº”ç”¨ç¨‹åºçš„æ¡†æ¶ã€‚ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å¯ä»¥æŠŠLLMä½œä¸ºå†…æ ¸ï¼ŒLangChainä½œä¸ºå¤–å£³ï¼Œæ­å»ºä¸€ä¸ªç¨‹åºå‡ºæ¥ã€‚</p>
<p>LangChainæä¾›äº†</p>
<ul>
<li>ç»„ä»¶ï¼šå¤„ç†LLMçš„ç»„ä»¶çš„æŠ½è±¡ï¼›</li>
<li>å®šåˆ¶é“¾ï¼šæŠŠç»„ä»¶æ‹¼èµ·æ¥ï¼Œå®ç°ä¸€ä¸ªç‰¹å®šç”¨ä¾‹ã€‚</li>
</ul>
<p>å¯¹äºé˜…è¯»PDFï¼Œç›®å‰æœ‰ä¸¤ä¸ªæƒ³æ³•ï¼š</p>
<ul>
<li>å°†PDFè½¬ä¸ºJSONï¼Œç„¶åè¾“å…¥åˆ°LLMä¸­ï¼›</li>
<li>æ„å»ºRAGã€‚ä½¿ç”¨LangChainèƒ½å¤Ÿæ¯”è¾ƒæ–¹ä¾¿åœ°å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œå¬ZLBè¯´è¿™ä¸ªä¹Ÿä¸æ˜¯å¾ˆéš¾ã€‚æˆ‘ä¹‹å‰çš„ç•éš¾æƒ…ç»ªå¯èƒ½å¤ªé‡äº†ï¼Œç°åœ¨å†™ä¸€ä¸ªæ–‡æ¡£ï¼Œæ¿€åŠ±å’Œè®°å½•ä¸€ä¸‹è‡ªå·±å­¦ä¹ ã€‚</li>
</ul>
<details>
    <summary>RAGæ˜¯ä»€ä¹ˆï¼Ÿ</summary>
    <p>è™½ç„¶LLMéå¸¸å¼ºå¤§ï¼Œä½†å®ƒä»¬å¯¹äºå®ƒä»¬æœªç»è®­ç»ƒçš„ä¿¡æ¯ä¸€æ— æ‰€çŸ¥ã€‚å¦‚æœæ‚¨æƒ³ä½¿ç”¨LLMæ¥å›ç­”å®ƒæœªç»è®­ç»ƒçš„æ–‡æ¡£ç›¸å…³é—®é¢˜ï¼Œæ‚¨éœ€è¦å‘å…¶æä¾›è¿™äº›æ–‡æ¡£çš„ä¿¡æ¯ã€‚æœ€å¸¸ç”¨çš„æ–¹æ³•æ˜¯é€šè¿‡â€œæ£€ç´¢å¢å¼ºç”Ÿæˆâ€ï¼ˆ retrieval augmented generationï¼ŒRAG ï¼‰ã€‚</p>
<p>æ£€ç´¢å¢å¼ºç”Ÿæˆçš„æ€æƒ³æ˜¯ï¼Œåœ¨ç»™å®šä¸€ä¸ªé—®é¢˜æ—¶ï¼Œé¦–å…ˆè¿›è¡Œæ£€ç´¢æ­¥éª¤ä»¥è·å–ä»»ä½•ç›¸å…³æ–‡æ¡£ã€‚ç„¶åå°†è¿™äº›æ–‡æ¡£ä¸åŸå§‹é—®é¢˜ä¸€èµ·ä¼ é€’ç»™è¯­è¨€æ¨¡å‹ï¼Œå¹¶è®©å®ƒç”Ÿæˆä¸€ä¸ªå›ç­”ã€‚ç„¶è€Œï¼Œä¸ºäº†åšåˆ°è¿™ä¸€ç‚¹ï¼Œé¦–å…ˆéœ€è¦å°†æ–‡æ¡£ä»¥é€‚åˆè¿›è¡Œæ­¤ç±»æŸ¥è¯¢çš„æ ¼å¼å‘ˆç°ã€‚</p>

</details>

<h2 id="æ„é€ ä¸€ä¸ªè¯­ä¹‰æœç´¢å¼•æ“">æ„é€ ä¸€ä¸ªè¯­ä¹‰æœç´¢å¼•æ“
</h2><blockquote>
<p><a class="link" href="https://python.langchain.com/docs/tutorials/retrievers/"  target="_blank" rel="noopener"
    >Build a semantic search engine | ğŸ¦œï¸ğŸ”— LangChain</a></p>
</blockquote>
<h3 id="è¯»å–pdf">è¯»å–PDF
</h3><blockquote>
<p><a class="link" href="https://python.langchain.com/docs/how_to/document_loader_pdf/"  target="_blank" rel="noopener"
    >How to load PDFs | ğŸ¦œï¸ğŸ”— LangChain</a></p>
</blockquote>
<p>è¿™é‡Œï¼Œæ–‡æ¡£ä¸­æ¨èä½¿ç”¨äº†pypdfåº“ã€‚è¿™é‡Œ</p>
<p>åœ¨å®é™…åº”ç”¨ä¸­å¯ä»¥ä½¿ç”¨å…¶ä»–æå–æ•ˆæœæ›´å¥½çš„åº“ã€‚LangChainæ”¯æŒçš„PDFæ ¼å¼å¾ˆå¤šï¼Œå¯ä»¥é€‰æ‹©ä¸€ä¸‹ã€‚</p>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th>Document Loader</th>
          <th>Description</th>
          <th>Package/API</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><a class="link" href="https://python.langchain.com/docs/integrations/document_loaders/pypdfloader"  target="_blank" rel="noopener"
    >PyPDF</a></td>
          <td>Uses <code>pypdf</code> to load and parse PDFs</td>
          <td>Package</td>
      </tr>
      <tr>
          <td><a class="link" href="https://python.langchain.com/docs/integrations/document_loaders/unstructured_file"  target="_blank" rel="noopener"
    >Unstructured</a></td>
          <td>Uses Unstructured&rsquo;s open source library to load PDFs</td>
          <td>Package</td>
      </tr>
      <tr>
          <td><a class="link" href="https://python.langchain.com/docs/integrations/document_loaders/amazon_textract"  target="_blank" rel="noopener"
    >Amazon Textract</a></td>
          <td>Uses AWS API to load PDFs</td>
          <td>API</td>
      </tr>
      <tr>
          <td><a class="link" href="https://python.langchain.com/docs/integrations/document_loaders/mathpix"  target="_blank" rel="noopener"
    >MathPix</a></td>
          <td>Uses MathPix to load PDFs</td>
          <td>Package</td>
      </tr>
      <tr>
          <td><a class="link" href="https://python.langchain.com/docs/integrations/document_loaders/pdfplumber"  target="_blank" rel="noopener"
    >PDFPlumber</a></td>
          <td>Load PDF files using PDFPlumber</td>
          <td>Package</td>
      </tr>
      <tr>
          <td><a class="link" href="https://python.langchain.com/docs/integrations/document_loaders/pypdfdirectory"  target="_blank" rel="noopener"
    >PyPDFDirectry</a></td>
          <td>Load a directory with PDF files</td>
          <td>Package</td>
      </tr>
      <tr>
          <td><a class="link" href="https://python.langchain.com/docs/integrations/document_loaders/pypdfium2"  target="_blank" rel="noopener"
    >PyPDFium2</a></td>
          <td>Load PDF files using PyPDFium2</td>
          <td>Package</td>
      </tr>
      <tr>
          <td><a class="link" href="https://python.langchain.com/docs/integrations/document_loaders/pymupdf"  target="_blank" rel="noopener"
    >PyMuPDF</a></td>
          <td>Load PDF files using PyMuPDF</td>
          <td>Package</td>
      </tr>
      <tr>
          <td><a class="link" href="https://python.langchain.com/docs/integrations/document_loaders/pdfminer"  target="_blank" rel="noopener"
    >PDFMiner</a></td>
          <td>Load PDF files using PDFMiner</td>
          <td>Package</td>
      </tr>
  </tbody>
</table></div>
<p>æ­¤å¤–ï¼Œå¯¼å¸ˆä¹‹å‰è¿˜ç»™æˆ‘æ¨èäº†<a class="link" href="https://github.com/titipata/scipdf_parser"  target="_blank" rel="noopener"
    >titipata/scipdf_parser</a>åº“ï¼Œèƒ½å¤Ÿæ›´å¥½åœ°å¤„ç†å›¾åƒå’Œæ‰«ææ–‡æœ¬ï¼Œå¹¶ä¸”è¿è¡Œåœ¨dockerä¸Šï¼Œä¾¿äºéƒ¨ç½²ã€‚</p>
<details>
    <summary>pypdfçš„ä»‹ç»</summary>
    <blockquote>
<p><a class="link" href="https://pypdf.readthedocs.io/en/stable/index.html"  target="_blank" rel="noopener"
    >Welcome to pypdf â€” pypdf 5.1.0 documentation</a></p>
</blockquote>
<p>PyPDF æ˜¯ä¸€ä¸ªç”¨äºå¤„ç† PDF æ–‡ä»¶çš„ Pythonåº“ã€‚å®ƒæä¾›äº†ä¸€ç»„å·¥å…·å’ŒåŠŸèƒ½ï¼Œç”¨äºè¯»å–ã€è§£æå’Œæ“ä½œ PDF æ–‡ä»¶çš„å†…å®¹ã€‚</p>

</details>

<h3 id="splitting">Splitting
</h3><details>
    <summary>åŸæ–‡</summary>
    <p>For both information retrieval and downstream question-answering purposes, a page may be too coarse a representation. Our goal in the end will be to retrieve <code>Document</code> objects that answer an input query, and further splitting our PDF will help ensure that the meanings of relevant portions of the document are not &ldquo;washed out&rdquo; by surrounding text.</p>
<p>We can use <a class="link" href="https://python.langchain.com/docs/concepts/text_splitters/"  target="_blank" rel="noopener"
    >text splitters</a> for this purpose. Here we will use a simple text splitter that partitions based on characters. We will split our documents into chunks of 1000 characters with 200 characters of overlap between chunks. The overlap helps mitigate the possibility of separating a statement from important context related to it. We use the <a class="link" href="https://python.langchain.com/docs/how_to/recursive_text_splitter/"  target="_blank" rel="noopener"
    >RecursiveCharacterTextSplitter</a>, which will recursively split the document using common separators like new lines until each chunk is the appropriate size. This is the recommended text splitter for generic text use cases.</p>
<p>We set <code>add_start_index=True</code> so that the character index where each split Document starts within the initial Document is preserved as metadata attribute â€œstart_indexâ€.</p>
<p>See <a class="link" href="https://python.langchain.com/docs/how_to/document_loader_pdf/"  target="_blank" rel="noopener"
    >this guide</a> for more detail about working with PDFs, including how to extract text from specific sections and images.</p>

</details>

<p>å¯¹äºé—®é¢˜æé—®çš„æ–‡æœ¬æ¥è¯´ï¼Œç›´æ¥å›ç­”ä¸€æ•´é¡µè‚¯å®šæ˜¯å¤ªç²—ç•¥äº†ã€‚æˆ‘ä»¬æœ€ç»ˆçš„ç›®æ ‡æ˜¯æ£€ç´¢å›ç­”è¾“å…¥æŸ¥è¯¢çš„æ–‡æ¡£å¯¹è±¡ï¼Œè¿›ä¸€æ­¥æ‹†åˆ† PDF å°†æœ‰åŠ©äºç¡®ä¿æ–‡æ¡£ç›¸å…³éƒ¨åˆ†çš„å«ä¹‰ä¸ä¼šè¢«å‘¨å›´çš„æ–‡æœ¬â€œå†²æ·¡â€ã€‚</p>
<p>æ‰€ä»¥æ¥ä¸‹æ¥åº”è¯¥ç”¨æ–‡æœ¬åˆ†å‰²å™¨æ¥è¿›è¡Œåˆ†å‰²ï¼ˆSplittingï¼‰å¤„ç†ã€‚è¿™é‡Œç”¨ä¸€ä¸ª<code>RecursiveCharacterTextSplitter</code>è¿›è¡Œåˆ†å‰²ã€‚è¿™é‡Œä½¿ç”¨å¸¸è§åˆ†éš”ç¬¦æ¥å¯¹æ–‡æ¡£è¿›è¡Œåˆ†å‰²ï¼Œé€‚ç”¨äºä¸€èˆ¬çš„æ–‡æœ¬ã€‚</p>

<div class="notice notice-warning" >
    <div class="notice-title"><svg xmlns="http://www.w3.org/2000/svg" class="icon notice-icon" viewBox="0 0 576 512"Â fill="#704343"><path d="M570 440c18 32-5 72-42 72H48c-37 0-60-40-42-72L246 24c19-32 65-32 84 0l240 416zm-282-86a46 46 0 100 92 46 46 0 000-92zm-44-165l8 136c0 6 5 11 12 11h48c7 0 12-5 12-11l8-136c0-7-5-13-12-13h-64c-7 0-12 6-12 13z"/></svg></div><p>ä½¿ç”¨<code>RecursiveCharacterTextSplitter</code>æ— æ³•è¯»å–å›¾åƒæˆ–ç‰¹å®šåŒºåŸŸçš„æ–‡æœ¬ã€‚</p></div>

<h3 id="embeddings">Embeddings
</h3><p>æ¥ä¸‹æ¥å°†æ–‡æœ¬åµŒå…¥åˆ°å‘é‡ä¸­å»ï¼Œä¾¿äºè¿›è¡Œç›¸ä¼¼åº¦æŒ‡æ ‡æ¥è¯†åˆ«ç›¸å…³æ–‡æœ¬ã€‚</p>
<p>è¿™é‡ŒLangChainæ”¯æŒæ•°åç§Embeddingsæ–¹æ³•ã€‚è¿™é‡Œæˆ‘é€‰æ‹©äº†ä½¿ç”¨Hugging Faceï¼Œå¯ä»¥é€‰æ‹©å°†æ¨¡å‹ä¸‹è½½è‡³æœ¬åœ°æˆ–è€…ä½¿ç”¨<code>Hugging Face Inference API</code>æ¥è°ƒç”¨æ¥å£ã€‚è¿™é‡Œå¯ä»¥ç›´æ¥ä½¿ç”¨<code>HuggingFaceEmbeddings</code>æ¥è¿›è¡Œå¤„ç†ã€‚éå¸¸æ–¹ä¾¿ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">langchain_huggingface</span> <span class="kn">import</span> <span class="n">HuggingFaceEmbeddings</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">embeddings_model</span> <span class="o">=</span> <span class="n">HuggingFaceEmbeddings</span><span class="p">(</span><span class="n">model_name</span><span class="o">=</span><span class="s2">&#34;sentence-transformers/all-mpnet-base-v2&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">embeddings</span> <span class="o">=</span> <span class="n">embeddings_model</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">vector_1</span> <span class="o">=</span> <span class="n">embeddings</span><span class="o">.</span><span class="n">embed_query</span><span class="p">(</span><span class="n">all_splits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">page_content</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">vector_2</span> <span class="o">=</span> <span class="n">embeddings</span><span class="o">.</span><span class="n">embed_query</span><span class="p">(</span><span class="n">all_splits</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">page_content</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">vector_1</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">vector_2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;Generated vectors of length </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">vector_1</span><span class="p">)</span><span class="si">}</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="n">vector_1</span><span class="p">[:</span><span class="mi">10</span><span class="p">])</span>
</span></span></code></pre></div><h3 id="vector-stores">Vector Stores
</h3><p>LangChainçš„Vector Storeså¯¹è±¡åŒ…æ‹¬äº†ä¸€äº›æŠŠæ–‡æœ¬å’ŒDocumentå¯¹è±¡åŠ å…¥åˆ°Storesä¸­çš„æ–¹æ³•ï¼Œç„¶åé€šè¿‡ç›¸ä¼¼æ€§è¿›è¡Œä¸€ä¸ªæ’åˆ—ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">langchain_core.vectorstores</span> <span class="kn">import</span> <span class="n">InMemoryVectorStore</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">vector_store</span> <span class="o">=</span> <span class="n">InMemoryVectorStore</span><span class="p">(</span><span class="n">embeddings</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">ids</span> <span class="o">=</span> <span class="n">vector_store</span><span class="o">.</span><span class="n">add_documents</span><span class="p">(</span><span class="n">documents</span><span class="o">=</span><span class="n">all_splits</span><span class="p">)</span>
</span></span></code></pre></div><p>æ­¤æ—¶å°±å®Œæˆäº†å­˜å‚¨å’Œæ’åˆ—ã€‚</p>
<p>è¿™é‡Œå‘é‡å­˜å‚¨ä¸€èˆ¬æ¥è¯´æ˜¯å¯ä»¥è¿æ¥åˆ°ç°æœ‰çš„Vector Storesä¸­çš„ã€‚</p>
<h3 id="usage">Usage
</h3><ol>
<li>æŸ¥è¯¢å’Œè¿™å¥è¯ç›¸ä¼¼çš„å¥å­</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">results</span> <span class="o">=</span> <span class="n">vector_store</span><span class="o">.</span><span class="n">similarity_search</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;Diffusion is a image generation method.&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="n">results</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span></span></code></pre></div><ol start="2">
<li>å¼‚æ­¥æŸ¥è¯¢ï¼ˆç”¨äºæµç¨‹æ§åˆ¶ï¼‰</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">results</span> <span class="o">=</span> <span class="k">await</span> <span class="n">vector_store</span><span class="o">.</span><span class="n">asimilarity_search</span><span class="p">(</span><span class="s2">&#34;What is diffusion?&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="n">results</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span></span></code></pre></div><ol start="3">
<li>è¿”å›åˆ†æ•°</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># Note that providers implement different scores; </span>
</span></span><span class="line"><span class="cl"><span class="c1"># the score here is a distance metric that varies inversely with similarity.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">results</span> <span class="o">=</span> <span class="n">vector_store</span><span class="o">.</span><span class="n">similarity_search_with_score</span><span class="p">(</span><span class="s2">&#34;What is Diffusion?&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">doc</span><span class="p">,</span> <span class="n">score</span> <span class="o">=</span> <span class="n">results</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;Score: </span><span class="si">{</span><span class="n">score</span><span class="si">}</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="n">doc</span><span class="p">)</span>
</span></span></code></pre></div><ol start="4">
<li>é€šè¿‡å’Œembedded queryçš„ç›¸ä¼¼åº¦è¿›è¡ŒæŸ¥è¯¢</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">embedding</span> <span class="o">=</span> <span class="n">embeddings</span><span class="o">.</span><span class="n">embed_query</span><span class="p">(</span><span class="s2">&#34;What is diffusion&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">results</span> <span class="o">=</span> <span class="n">vector_store</span><span class="o">.</span><span class="n">similarity_search_by_vector</span><span class="p">(</span><span class="n">embedding</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="n">results</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span></span></code></pre></div><h3 id="retrievers">Retrievers
</h3><p>æ£€ç´¢å™¨ï¼ˆRetrieverï¼‰å¯ä»¥ä»å‘é‡å­˜å‚¨ä¸­è¿›è¡Œæ„å»ºï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥å’Œéå‘é‡å½¢å¼è¿›è¡Œäº¤äº’ã€‚å¦‚æœæˆ‘ä»¬è¦æ„å»ºä¸€ä¸ªèƒ½å¤Ÿæ£€ç´¢æ–‡æ¡£çš„æ–¹æ³•çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªrunnableçš„æ£€ç´¢å™¨ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">langchain_core.documents</span> <span class="kn">import</span> <span class="n">Document</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">langchain_core.runnables</span> <span class="kn">import</span> <span class="n">chain</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nd">@chain</span>
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">retriever</span><span class="p">(</span><span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Document</span><span class="p">]:</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">vector_store</span><span class="o">.</span><span class="n">similarity_search</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">retriever</span><span class="o">.</span><span class="n">batch</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;What is diffusion?&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;What is forward process?&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">],</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span></code></pre></div><p>è‡³æ­¤ï¼Œæˆ‘ä»¬æ„å»ºäº†ä¸€ä¸ªèƒ½å¤Ÿè¯»å¤šç¯‡PDFæ–‡ç« çš„ã€èƒ½å¤Ÿå¯¹PDFæ–‡ç« è¿›è¡ŒæŸ¥è¯¢çš„è¯­ä¹‰æœç´¢å¼•æ“ã€‚</p>
<h2 id="chat-modelså’Œpromptæ¨¡æ¿">Chat Modelså’ŒPromptæ¨¡æ¿
</h2><p>è¿™é‡Œé€šè¿‡Vllmå¯åŠ¨LLMï¼Œä»¥Qwen2.5-7B-Instructæ¨¡å‹ä¸ºä¾‹ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">langchain_community.llms</span> <span class="kn">import</span> <span class="n">VLLM</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">llm</span> <span class="o">=</span> <span class="n">VLLM</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="s2">&#34;/home/ubuntu/jjq/Qwen/Qwen2.5-7B-Instruct/&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">           <span class="n">trust_remote_code</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">           <span class="n">max_new_tokens</span><span class="o">=</span><span class="mi">512</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">           <span class="n">top_k</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">           <span class="n">top_p</span><span class="o">=</span><span class="mf">0.95</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">           <span class="n">temperature</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">           <span class="n">max_model_len</span> <span class="o">=</span> <span class="mi">30000</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="n">llm</span><span class="p">(</span><span class="s2">&#34;What is the capital of France ?&#34;</span><span class="p">))</span>
</span></span></code></pre></div><p>æ¥ä¸‹æ¥è®¾è®¡Promptæ¨¡æ¿ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">langchain</span> <span class="kn">import</span> <span class="n">LLMChain</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">langchain.prompts</span> <span class="kn">import</span> <span class="n">PromptTemplate</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">langchain.memory</span> <span class="kn">import</span> <span class="n">ConversationBufferMemory</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">langchain.chains</span> <span class="kn">import</span> <span class="n">ConversationalRetrievalChain</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">langchain.prompts.chat</span> <span class="kn">import</span> <span class="n">ChatPromptTemplate</span><span class="p">,</span> <span class="n">SystemMessagePromptTemplate</span><span class="p">,</span> <span class="n">HumanMessagePromptTemplate</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">template</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">        ã€ä»»åŠ¡æè¿°ã€‘
</span></span></span><span class="line"><span class="cl"><span class="s1">        è¯·ä»”ç»†é˜…è¯»è®ºæ–‡ï¼Œå›ç­”ç”¨æˆ·ç»™å‡ºçš„é—®é¢˜ï¼Œå°½é‡å…·æœ‰æ‰¹åˆ¤æ€§ã€‚
</span></span></span><span class="line"><span class="cl"><span class="s1">
</span></span></span><span class="line"><span class="cl"><span class="s1">        ã€è®ºæ–‡ã€‘
</span></span></span><span class="line"><span class="cl"><span class="s1">        {{context}}
</span></span></span><span class="line"><span class="cl"><span class="s1">
</span></span></span><span class="line"><span class="cl"><span class="s1">        -----------
</span></span></span><span class="line"><span class="cl"><span class="s1">        </span><span class="si">{question}</span><span class="s1">
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#39;&#39;&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># æ£€ç´¢å™¨</span>
</span></span><span class="line"><span class="cl"><span class="n">retriever</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">as_retriever</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="c1"># è®°å¿†</span>
</span></span><span class="line"><span class="cl"><span class="n">memory</span> <span class="o">=</span> <span class="n">ConversationBufferMemory</span><span class="p">(</span><span class="n">memory_key</span><span class="o">=</span><span class="s2">&#34;chat_history&#34;</span><span class="p">,</span> <span class="n">return_messages</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1"># æ„å»ºAgent</span>
</span></span><span class="line"><span class="cl"><span class="n">qa</span> <span class="o">=</span> <span class="n">ConversationalRetrievalChain</span><span class="o">.</span><span class="n">from_llm</span><span class="p">(</span><span class="n">llm</span><span class="p">,</span> <span class="n">retriever</span><span class="p">,</span> <span class="n">memory</span><span class="o">=</span><span class="n">memory</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">qa</span><span class="p">({</span><span class="s2">&#34;question&#34;</span><span class="p">:</span> <span class="s2">&#34;èƒ½ä¸èƒ½ç”¨ä¸­æ–‡ç»™å‡ºè®ºæ–‡çš„ä¼˜åŠ¿æˆ–è€…å‰æ™¯ï¼Ÿ&#34;</span><span class="p">})</span>
</span></span></code></pre></div>
</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/langchain/">LangChain</a>
        
            <a href="/tags/llm/">LLM</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>è‡ªç”±è½¬è½½/éå•†ç”¨/éè¡ç”Ÿ/ä¿æŒç½²å | CC BY-NC-ND 3.0</span>
    </section>
    </footer>


    
        <link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css"integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI&#43;WdtXRGWt2kTvGFasHpSy3SV"crossorigin="anonymous"
            ><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"integrity="sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG&#43;vnGctmUb0ZY0l8"crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"integrity="sha384-&#43;VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4&#43;/RRE05"crossorigin="anonymous"
                defer
                >
            </script><script>
    window.addEventListener("DOMContentLoaded", () => {
        renderMathInElement(document.body, {
            delimiters: [
                { left: "$$", right: "$$", display: true },
                { left: "$", right: "$", display: false },
                { left: "\\(", right: "\\)", display: false },
                { left: "\\[", right: "\\]", display: true }
            ],
            ignoredClasses: ["gist"]
        });})
</script>
    
</article>

    

    


<aside class="related-content--wrapper">
    <h2 class="section-title">ç›¸å…³æ–‡ç« </h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="">
    <a href="/2025/ai-assist-drug-design/">
        
        

        <div class="article-details">
            <h2 class="article-title">AI Assist Drug Design</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/2025/shortcodes/">
        
        

        <div class="article-details">
            <h2 class="article-title">æ¬è¿ä¸€äº›Shortcodes</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/2025/multiagentcollaboration/">
        
        

        <div class="article-details">
            <h2 class="article-title">è®ºæ–‡é˜…è¯» | å¤šæ™ºèƒ½ä½“åä½œæœºåˆ¶ï¼šå¤§è¯­è¨€æ¨¡å‹ç»¼è¿°</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    <script src='//unpkg.com/@waline/client@v2/dist/waline.js'></script>
<link href='//unpkg.com/@waline/client@v2/dist/waline.css' rel='stylesheet'/>
<div id="waline" class="waline-container"></div>
<style>
    .waline-container {
        background-color: var(--card-background);
        border-radius: var(--card-border-radius);
        box-shadow: var(--shadow-l1);
        padding: var(--card-padding);
        --waline-font-size: var(--article-font-size);
    }
    .waline-container .wl-count {
        color: var(--card-text-color-main);
    }
</style><script>
    
    Waline.init({"dark":"html[data-scheme=\"dark\"]","el":"#waline","emoji":["https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/qq","https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/alus","https://npm.elemecdn.com/@waline/emojis@1.1.0/bilibili","https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/tieba"],"lang":"zh-CN","locale":{"admin":"ç«™é•¿","placeholder":"è¯„è®ºç³»ç»Ÿç°åœ¨æ˜¯æŸåçš„ï¼Œç«™é•¿æœ€è¿‘æœ‰ç‚¹å¿™ï¼Œæ™šç‚¹æŠŠå®ƒä¿®å¥½ã€‚","sofa":"è¿˜æ²¡æœ‰è¯„è®ºï¼Œå¿«æ¥æŠ¢æ²™å‘å‘€"},"requiredMeta":["name","email","url"],"serverURL":"https://waline-hh7wo7iel-ionfeathers-projects.vercel.app/","visitor":false});
</script>

    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2024 - 
        
        2025 ionfeather&#39;Log
    </section>
    
    <section class="powerby">
        ä½¿ç”¨ <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> æ„å»º <br />
        ä¸»é¢˜ <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.29.0">Stack</a></b> ç”± <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> è®¾è®¡
    </section>
</footer>


<script>
    (function(u, c) {
      var d = document, t = 'script', o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function(e) { c(e); }); }
      s.parentNode.insertBefore(o, s);
    })('//cdn.bootcss.com/pangu/3.3.0/pangu.min.js', function() {
      pangu.spacingPage();
    });
</script>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>
<script src="https://npm.elemecdn.com/nprogress@0.2.0/nprogress.js" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://npm.elemecdn.com/nprogress@0.2.0/nprogress.css" crossorigin="anonymous" />
<script>
    NProgress.start();
    document.addEventListener("readystatechange", () => {
        if (document.readyState === "interactive") NProgress.inc(0.8);
        if (document.readyState === "complete") NProgress.done();
    });
</script>


    </body>
</html>
